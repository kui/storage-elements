(function(e){function h(k){if(j[k])return j[k].exports;var l=j[k]={exports:{},id:k,loaded:!1};return e[k].call(l.exports,l,l.exports,h),l.loaded=!0,l.exports}var j={};return h.m=e,h.c=j,h.p="",h(0)})([function(e,h,j){"use strict";var k=j(4),l=function(n){return n&&n.__esModule?n:{default:n}}(k);l.default.register()},function(e,h){"use strict";h.__esModule=!0,h.sleep=function(m){var n=void 0;return new j(o=>{n=setTimeout(()=>o(),m)},()=>{clearTimeout(n)})},h.dedup=function(m){var n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:(o,p)=>o===p;return m.reduce((o,p)=>{if(o.some(q=>n(q,p)));return o.concat(p)},[])},h.subtractSet=function(m,n){return new Set(Array.from(m).filter(o=>!n.has(o)))};class j extends Promise{constructor(l,m){super(l),this.cancellFunction=m}cancell(){this.cancellFunction()}}h.CancellablePromise=j;class k extends Map{*flattenValues(){for(var l=this.values(),m=Array.isArray(l),n=0,l=m?l:l[Symbol.iterator]();;){var o;if(m){if(n>=l.length)break;o=l[n++]}else{if(n=l.next(),n.done)break;o=n.value}var p=o;for(var q=p,r=Array.isArray(q),s=0,q=r?q:q[Symbol.iterator]();;){var t;if(r){if(s>=q.length)break;t=q[s++]}else{if(s=q.next(),s.done)break;t=s.value}var v=t;yield v}}}}h.ArrayValueMap=class extends k{add(m,n){var o=this.get(m);return o||(o=[],this.set(m,o)),o.push(n),this}},h.SetValueMap=class extends k{add(m,n){var o=this.get(m);return o||(o=new Set,this.set(m,o)),o.add(n),this}}},function(e,h){"use strict";function j(n,o){if(k[n])throw Error(`Already registered handler for "${n}"`);k[n]=o}h.__esModule=!0,h.registerHandler=j,h.findHandler=function(o){return k[o]};var k={};class l{constructor(n){this.storage=n}read(n){return Promise.resolve(this.storage.getItem(n))}write(n,o){return this.storage.setItem(n,o),Promise.resolve()}remove(n){return this.storage.removeItem(n),Promise.resolve()}}h.WebStorageAreaHandler=l,localStorage&&j("local-storage",new l(localStorage)),sessionStorage&&j("session-storage",new l(sessionStorage));class m{constructor(n){this.storage=n}read(n){return new Promise(o=>this.storage.get(n,p=>o(p[n])))}write(n,o){return new Promise(p=>this.storage.set({[n]:o},p))}remove(n){return new Promise(o=>this.storage.remove(n,o))}}h.ChromeStorageAreaHandler=m,chrome&&chrome.storage&&(chrome.storage.local&&j("chrome-local",new m(chrome.storage.local)),chrome.storage.sync&&j("chrome-sync",new m(chrome.storage.sync)))},function(e,h,j){"use strict";function k(t){return function(){var v=t.apply(this,arguments);return new Promise(function(w,x){function y(z,A){try{var B=v[z](A),C=B.value}catch(D){return void x(D)}return B.done?void w(C):Promise.resolve(C).then(function(D){y("next",D)},function(D){y("throw",D)})}return y("next")})}}function l(){for(var t=arguments.length,v=Array(t),w=0;w<t;w++)v[w]=arguments[w];for(var x=v,y=Array.isArray(x),z=0,x=y?x:x[Symbol.iterator]();;){var A;if(y){if(z>=x.length)break;A=x[z++]}else{if(z=x.next(),z.done)break;A=z.value}var B=A,C=B();if(null!=C)return C}return null}function m(t,v){for(var w=t.v.values(),x=Array.isArray(w),y=0,w=x?w:w[Symbol.iterator]();;){var z;if(x){if(y>=w.length)break;z=w[y++]}else{if(y=w.next(),y.done)break;z=y.value}var A=z;if(A.name===v)return A.value}return null}h.__esModule=!0;var n=(()=>{var t=k(function*(v,w){yield Promise.all(w.map((()=>{var x=k(function*(y){yield p(v,y),yield q(v,y)});return function(){return x.apply(this,arguments)}})()))});return function(){return t.apply(this,arguments)}})(),o=(()=>{var t=k(function*(v,w){for(;v.lock;)yield v.lock;v.lock=w(),yield v.lock,v.lock=null});return function(){return t.apply(this,arguments)}})(),p=(()=>{var t=k(function*(v,w){var x=w.name,y=yield v.s.read(x),z=v.v.get(w);z||(z={name:w.name,value:null},v.v.set(w,z)),(z.name!==x||z.value!==y)&&(v.f.write(w,y),z.name=x,z.value=y)});return function(){return t.apply(this,arguments)}})(),q=(()=>{var t=k(function*(v,w){var x=w.name,y=l(function(){return v.f.read(w)},function(){return m(v,x)}),z=v.v.get(w);z||(z={name:w.name,value:null},v.v.set(w,z)),(z.name!==x||z.value!==y)&&(null==y?yield v.s.remove(x):yield v.s.write(x,y),z.name=x,z.value=y)});return function(){return t.apply(this,arguments)}})(),r=j(1),s=function(v){if(v&&v.__esModule)return v;var w={};if(null!=v)for(var x in v)Object.prototype.hasOwnProperty.call(v,x)&&(w[x]=v[x]);return w.default=v,w}(r);h.default=class{constructor(v,w){this.v=new Map,this.s=v,this.f=w,this.lock=null}sync(v){var w=this;return k(function*(){yield o(w,function(){return n(w,v)})})()}submit(v){var w=this;return k(function*(){yield o(w,function(){return Promise.all(v.map((()=>{var x=k(function*(y){yield q(w,y)});return function(){return x.apply(this,arguments)}})()))})})()}scan(v){var w=this;return k(function*(){yield o(w,k(function*(){var x=s.subtractSet(new Set(v),new Set(w.v.keys()));yield n(w,Array.from(x))}))})()}remove(v){var w=this;return k(function*(){yield o(w,k(function*(){for(var x=v,y=Array.isArray(x),z=0,x=y?x:x[Symbol.iterator]();;){var A;if(y){if(z>=x.length)break;A=x[z++]}else{if(z=x.next(),z.done)break;A=z.value}var B=A;w.v.delete(B)}}))})()}}},function(e,h,j){"use strict";function k(L){if(L&&L.__esModule)return L;var M={};if(null!=L)for(var N in L)Object.prototype.hasOwnProperty.call(L,N)&&(M[N]=L[N]);return M.default=L,M}function l(L){return function(){var M=L.apply(this,arguments);return new Promise(function(N,O){function P(Q,R){try{var S=M[Q](R),T=S.value}catch(U){return void O(U)}return S.done?void N(T):Promise.resolve(T).then(function(U){P("next",U)},function(U){P("throw",U)})}return P("next")})}}function m(L){return class extends L{get autosync(){var M=parseInt(v(this,"autosync"));return 0<M?M:700}set autosync(M){w(this,"autosync",M)}get area(){return v(this,"area")}set area(M){w(this,"area",M)}constructor(){super()}createdCallback(){var M=this;C(this),this.componentObservers=new Map,this.addEventListener("submit",N=>{N.preventDefault(),y(this)}),window.addEventListener("unload",()=>{n(this)&&z(this)}),new MutationObserver(N=>{console.debug("scan by form MutationObserver: ",this),A(this);var O=x(N.map($=>$.addedNodes)).filter($=>$ instanceof HTMLElement);if(0<O.length)for(var P=O,Q=Array.isArray(P),R=0,P=Q?P:P[Symbol.iterator]();;){var S;if(Q){if(R>=P.length)break;S=P[R++]}else{if(R=P.next(),R.done)break;S=R.value}var T=S;o(this,T)}var U=x(N.map($=>$.removedNodes)).filter($=>$ instanceof HTMLElement);if(0<U.length){B(this,U.filter($=>$.name));for(var V=U,W=Array.isArray(V),X=0,V=W?V:V[Symbol.iterator]();;){var Y;if(W){if(X>=V.length)break;Y=V[X++]}else{if(X=V.next(),X.done)break;Y=X.value}var Z=Y;p(this,Z)}}}).observe(this,{childList:!0,subtree:!0}),A(this),l(function*(){for(;;)yield E.sleep(M.autosync),n(M)?yield z(M):yield A(M)})()}attachedCallback(){A(this)}static get observedAttributes(){return["autosync","area"]}attributeChangedCallback(M){switch(M){case"autosync":break;case"area":C(this);}}}}function n(L){return L.hasAttribute("autosync")}function o(L,M){var N=[M,...Array.from(M.querySelectorAll("*"))].filter(U=>null!=U.value&&null!=U.name),O=function(V){var W=new MutationObserver(()=>z(L,[V]));W.observe(V,{attributes:!0,atributeFilter:["name"]}),L.componentObservers.set(V,W)};for(var P=N,Q=Array.isArray(P),R=0,P=Q?P:P[Symbol.iterator]();;){var S;if(Q){if(R>=P.length)break;S=P[R++]}else{if(R=P.next(),R.done)break;S=R.value}var T=S;O(T)}}function p(L,M){var N=[M,...Array.from(M.querySelectorAll("*"))];for(var O=N,P=Array.isArray(O),Q=0,O=P?O:O[Symbol.iterator]();;){var R;if(P){if(Q>=O.length)break;R=O[Q++]}else{if(Q=O.next(),Q.done)break;R=Q.value}var S=R,T=L.componentObservers.get(S);null==T||(L.componentObservers.delete(S),T.disconnect())}}function q(L){return Array.from(L.elements).filter(M=>M.name)}function r(L,M){var N=L.type;return"checkbox"===N||"radio"===N?void(L.checked=M===L.value):void(null==M||null==L.value||(L.value=M))}function s(L){var M=L.type;return"checkbox"===M||"radio"===M?L.checked?L.value:null:L.value}function t(L){var M=L.area;if(!M)return console.error("Require 'area' attribute"),null;var N=G.findHandler(M);return N?N:(console.error("No such area handler: area=%s",L.area),null)}function v(L,M){var N=L.getAttribute(M);return N?N:""}function w(L,M,N){null==N||L.setAttribute(M,N)}function x(L){return Array.from(function*(){for(var M=L,N=Array.isArray(M),O=0,M=N?M:M[Symbol.iterator]();;){var P;if(N){if(O>=M.length)break;P=M[O++]}else{if(O=M.next(),O.done)break;P=O.value}var Q=P;for(var R=Q,S=Array.isArray(R),T=0,R=S?R:R[Symbol.iterator]();;){var U;if(S){if(T>=R.length)break;U=R[T++]}else{if(T=R.next(),T.done)break;U=T.value}var V=U;yield V}}}())}h.__esModule=!0;var y=(()=>{var L=l(function*(M){M.binder&&(yield M.binder.submit(q(M)))});return function(){return L.apply(this,arguments)}})(),z=(()=>{var L=l(function*(M,N){M.binder&&(yield M.binder.sync(N?N:q(M)))});return function(){return L.apply(this,arguments)}})(),A=(()=>{var L=l(function*(M){M.binder&&(yield M.binder.scan(q(M)))});return function(){return L.apply(this,arguments)}})(),B=(()=>{var L=l(function*(M,N){M.binder&&(yield M.binder.remove(N))});return function(){return L.apply(this,arguments)}})(),C=(()=>{var L=l(function*(M){M.binder=null;var N=t(M);N&&(M.binder=new I.default(N,{write:r,read:s}),yield z(M))});return function(){return L.apply(this,arguments)}})();h.mixinStorageForm=m;var D=j(1),E=k(D),F=j(2),G=k(F),H=j(3),I=function(M){return M&&M.__esModule?M:{default:M}}(H),J=m(HTMLFormElement);class K extends J{static get extends(){return"form"}static register(){document.registerElement("storage-form",K)}}h.default=K}]);
//# sourceMappingURL=storage-elements.js.map